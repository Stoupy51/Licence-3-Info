
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/wait.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <time.h>
#include <signal.h>

#define Stou_0 "\033[0m"	// RESET
#define Stou_R "\033[0;31m" // RED
#define Stou_G "\033[0;32m" // GREEN
#define Stou_Y "\033[0;33m" // YELLOW

int main(int argc, char *argv[]) {
	printf("\n");
	pid_t pid;

	// Vérification des arguments
	if (argc != 2 || (pid = atoi(argv[1])) <= 0) {
		printf(Stou_R "Usage: %s <pid>\n" Stou_0, argv[0]);
		exit(EXIT_FAILURE);
	}

	printf(Stou_G "Client started : " Stou_Y "%d" Stou_G ".\n" Stou_0, getpid());

	// Vérification de l'existence du processus
	if (kill(pid, 0) == -1) {
		printf(Stou_R "The process " Stou_Y "%d" Stou_R " does not exist.\n" Stou_0, pid);
		exit(EXIT_FAILURE);
	}

	// Envoie 3 signaux SIGUSR1 avec une pause d'une seconde entre chaque
	for (int i = 0; i < 3; i++) {
		printf(Stou_G "Sending signal SIGUSR1 to " Stou_Y "%d" Stou_G ".\n" Stou_0, pid);
		kill(pid, SIGUSR1);
		sleep(1);
	}

	// Envoie un signal SIGINT
	printf(Stou_G "Sending signal SIGINT to " Stou_Y "%d" Stou_G ".\n" Stou_0, pid);
	kill(pid, SIGINT);

	printf("\n");
	return EXIT_SUCCESS;
}
