
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>

int main() {
	int entier;
	printf("Entrez un entier : ");
	if (scanf("%d", &entier) != 1) {
		fprintf(stderr, "Erreur de lecture de l'entier\n");
		exit(EXIT_FAILURE);
	}

	int fd;
	if ((fd = open("toto.bin", O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR)) == -1) {
		perror("Erreur lors de l'ouverture du fichier");
		exit(EXIT_FAILURE);
	}

	if (write(fd, &entier, sizeof(int)) == -1) {
		perror("Erreur lors de l'écriture dans le fichier");
		exit(EXIT_FAILURE);
	}
	fprintf(stdout, "Ecriture de %d dans le fichier toto.bin\n", entier);

	char input[64];
	printf("Entrez une chaîne de caractères : ");
	if (scanf("%63s", input) != 1) {
		fprintf(stderr, "Erreur de lecture de la chaîne de caractères\n");
		exit(EXIT_FAILURE);
	}

	if (write(fd, input, sizeof(input)) == -1) {
		perror("Erreur lors de l'écriture dans le fichier");
		exit(EXIT_FAILURE);
	}
	fprintf(stdout, "Ecriture de %s dans le fichier toto.bin\n", input);

	if (close(fd) == -1) {
		perror("Erreur lors de la fermeture du fichier");
		exit(EXIT_FAILURE);
	}

	return 0;
}

